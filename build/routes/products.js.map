{"version":3,"sources":["../../src/routes/products.js"],"names":["router","get","req","res","next","console","log","Object","keys","query","skus","replace","skusKey","productService","getProducts","then","data","responseJSON","status","json","catch","err","response","error","message"],"mappings":";;;;;;AAAA;;AACA;;;;AACA;;;;AACA;AACA,IAAIA,MAAM,GAAG,sBAAb;AAEA;;AACAA,MAAM,CAACC,GAAP,CAAW,GAAX,EAAgB,OAAMC,GAAN,EAAWC,GAAX,EAAgBC,IAAhB,KAAyB;AACvCC,EAAAA,OAAO,CAACC,GAAR,CAAYC,MAAM,CAACC,IAAP,CAAYN,GAAG,CAACO,KAAhB,CAAZ;AAEA,QAAMC,IAAI,GAAGH,MAAM,CAACC,IAAP,CAAYN,GAAG,CAACO,KAAhB,EAAuB,CAAvB,EAA0BE,OAA1B,CAAkC,SAAlC,EAA6C,EAA7C,EAAiDA,OAAjD,CAAyD,YAAzD,EAAuE,EAAvE,CAAb;AACAN,EAAAA,OAAO,CAACC,GAAR,CAAY,WAAWI,IAAvB;AACA,QAAME,OAAO,GAAI,QAAOF,IAAK,EAA7B,CALuC,CAOvC;AACE;AACA;AACA;AACA;AACA;;AACEG,4BAAeC,WAAf,CAA2BJ,IAA3B,EAAiCK,IAAjC,CAAuCC,IAAD,IAAU;AAC9C,UAAMC,YAAY,GAAGD,IAArB,CAD8C,CAE9C;AACA;AACA;AACA;AACA;;AACA,WAAOb,GAAG,CAACe,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,YAArB,CAAP;AACD,GARD,EAQGG,KARH,CAQSC,GAAG,IAAI;AACdhB,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBe,GAAnB;AAEA,WAAOlB,GAAG,CAACe,MAAJ,CAAWG,GAAG,CAACC,QAAJ,CAAaJ,MAAb,IAAuB,GAAlC,EAAuCC,IAAvC,CAA4C;AAACI,MAAAA,KAAK,EAAEF,GAAG,CAACG;AAAZ,KAA5C,CAAP;AACD,GAZD,EAbmC,CA0BrC;AACF;AACA;;AACD,CA7BD;kBA+BexB,M","sourcesContent":["import { Router } from 'express';\nimport productService from '../services/productServices'\nimport { client } from '../app';\n// import requiresLogin from '../authentication/firebase-middleware';\nlet router = Router();\n\n/* GET users listing. */\nrouter.get('/', async(req, res, next) => {\n  console.log(Object.keys(req.query));\n  \n  const skus = Object.keys(req.query)[0].replace(/['\"{}]/g, '').replace('productId:', '');\n  console.log(\"skus: \" + skus);\n  const skusKey = `SKUS:${skus}`;\n\n  // client.get(skusKey, (err, result) => {\n    // if (result) {\n    //   const resultJSON = JSON.parse(result);\n    //   return res.status(200).json(resultJSON);\n    // }\n    // else {\n      productService.getProducts(skus).then((data) => {\n        const responseJSON = data;\n        // client.setex(skusKey, 120, JSON.stringify(responseJSON));\n        // responseJSON.forEach(item => {\n        //   const skuKey = `SKU:${item.partNumber.toLocaleLowerCase()}`;\n        //   client.setex(skuKey, 120, item);\n        // });\n        return res.status(200).json(responseJSON);\n      }).catch(err => {\n        console.log('err', err);\n        \n        return res.status(err.response.status || 404).json({error: err.message});\n      });\n    //}\n  // });\n  //res.send('respuesta de productos');\n});\n\nexport default router;\n"],"file":"products.js"}