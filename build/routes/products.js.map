{"version":3,"sources":["../../src/routes/products.js"],"names":["router","get","req","res","next","skus","Object","values","query","replace","skusKey","productService","getProducts","then","data","responseJSON","status","json","catch","err","console","log","response","error","message"],"mappings":";;;;;;AAAA;;AACA;;;;AACA;;;;AACA;AACA,IAAIA,MAAM,GAAG,sBAAb;AAEA;;AACAA,MAAM,CAACC,GAAP,CAAW,GAAX,EAAgB,OAAMC,GAAN,EAAWC,GAAX,EAAgBC,IAAhB,KAAyB;AACvC,QAAMC,IAAI,GAAGC,MAAM,CAACC,MAAP,CAAcL,GAAG,CAACM,KAAlB,EAAyB,CAAzB,EAA4BC,OAA5B,CAAoC,QAApC,EAA8C,EAA9C,CAAb;AAEA,QAAMC,OAAO,GAAI,QAAOL,IAAK,EAA7B,CAHuC,CAKvC;AACE;AACA;AACA;AACA;AACA;;AACEM,4BAAeC,WAAf,CAA2BP,IAA3B,EAAiCQ,IAAjC,CAAuCC,IAAD,IAAU;AAC9C,UAAMC,YAAY,GAAGD,IAArB,CAD8C,CAE9C;AACA;AACA;AACA;AACA;;AACA,WAAOX,GAAG,CAACa,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,YAArB,CAAP;AACD,GARD,EAQGG,KARH,CAQSC,GAAG,IAAI;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBF,GAAnB;AAEA,WAAOhB,GAAG,CAACa,MAAJ,CAAWG,GAAG,CAACG,QAAJ,CAAaN,MAAb,IAAuB,GAAlC,EAAuCC,IAAvC,CAA4C;AAACM,MAAAA,KAAK,EAAEJ,GAAG,CAACK;AAAZ,KAA5C,CAAP;AACD,GAZD,EAXmC,CAwBrC;AACF;AACA;;AACD,CA3BD;kBA6BexB,M","sourcesContent":["import { Router } from 'express';\nimport productService from '../services/productServices'\nimport { client } from '../app';\n// import requiresLogin from '../authentication/firebase-middleware';\nlet router = Router();\n\n/* GET users listing. */\nrouter.get('/', async(req, res, next) => {\n  const skus = Object.values(req.query)[0].replace(/['\"}]/g, '');\n\n  const skusKey = `SKUS:${skus}`;\n\n  // client.get(skusKey, (err, result) => {\n    // if (result) {\n    //   const resultJSON = JSON.parse(result);\n    //   return res.status(200).json(resultJSON);\n    // }\n    // else {\n      productService.getProducts(skus).then((data) => {\n        const responseJSON = data;\n        // client.setex(skusKey, 120, JSON.stringify(responseJSON));\n        // responseJSON.forEach(item => {\n        //   const skuKey = `SKU:${item.partNumber.toLocaleLowerCase()}`;\n        //   client.setex(skuKey, 120, item);\n        // });\n        return res.status(200).json(responseJSON);\n      }).catch(err => {\n        console.log('err', err);\n        \n        return res.status(err.response.status || 404).json({error: err.message});\n      });\n    //}\n  // });\n  //res.send('respuesta de productos');\n});\n\nexport default router;\n"],"file":"products.js"}